import os
import logging
import requests
import re
import random
from flask import Flask, request, jsonify

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

BOT_TOKEN = "8326410603:AAHeqICzU7ASRkr0xyDgmxP0a0ah2j4JMN4"

app = Flask(__name__)

class NavalnyAI:
    def get_response(self, user_message):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ"""
        try:
            # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
            message_lower = user_message.lower()
            
            # –Æ–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –≤ —Å—Ç–∏–ª–µ –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ
            if any(word in message_lower for word in ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤', 'hello']):
                responses = [
                    "–û, –∫–∞–∑–∞–∫–∏! –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –ó–Ω–∞–µ—Ç–µ, —è —Ç—É—Ç –ø–æ–¥—É–º–∞–ª... –ö–∞–∑–∞–∫–∏ - —ç—Ç–æ –∫–∞–∫ –æ–ø–ø–æ–∑–∏—Ü–∏—è, —Ç–æ–ª—å–∫–æ —Å —É—Å–∞–º–∏ –∏ —à–∞—à–∫–∞–º–∏! üòÑ –ù–æ –µ—Å–ª–∏ —Å–µ—Ä—å–µ–∑–Ω–æ, —Ä–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å!",
                    "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —Ç–æ–≤–∞—Ä–∏—â–∏ –∫–∞–∑–∞–∫–∏! –ì–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã —Å –ø—Ä–∏—Å—É—â–∏–º –º–Ω–µ —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞ –∏ –∏—Ä–æ–Ω–∏–µ–π! ü§ù"
                ]
            elif any(word in message_lower for word in ['–∫–∞–∫ –¥–µ–ª–∞', '–∫–∞–∫ –∂–∏–∑–Ω—å']):
                responses = [
                    "–î–µ–ª–∞? –û—Ç–ª–∏—á–Ω–æ! –ì–æ—Ç–æ–≤–ª—é –Ω–æ–≤—ã–π —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ... —ç—ç—ç... –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∑–∞—á–µ—Å—Ç–≤–∞! –®—É—á—É! –ù–æ –µ—Å–ª–∏ —Å–µ—Ä—å–µ–∑–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞—é –±–æ—Ä–æ—Ç—å—Å—è —Å –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å—é, –¥–∞–∂–µ –≤ —á–∞—Ç–µ! üí™",
                    "–ñ–∏–∑–Ω—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞! –û—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –µ—Å—Ç—å —Å –∫–µ–º –ø–æ—Å–ø–æ—Ä–∏—Ç—å –æ –ø–æ–ª–∏—Ç–∏–∫–µ... –æ–π, —Ç–æ –µ—Å—Ç—å –æ –∫–∞–∑–∞–∫–∞—Ö! –õ–∞–¥–Ω–æ, –ø—Ä–∏–∑–Ω–∞—é—Å—å - –ø—Ä–æ—Å—Ç–æ –ª—é–±–ª—é —Ö–æ—Ä–æ—à—É—é –¥–∏—Å–∫—É—Å—Å–∏—é! üòÑ"
                ]
            elif any(word in message_lower for word in ['–∫—Ç–æ —Ç—ã', '—á—Ç–æ —Ç—ã']):
                responses = [
                    "–Ø - —Ç–æ—Ç, –∫—Ç–æ –≤—Å–µ–≥–¥–∞ –Ω–∞–π–¥–µ—Ç –ø–æ–≤–æ–¥ –¥–ª—è —à—É—Ç–∫–∏! –ù—É –∏ –µ—â–µ –∫–æ–µ-—á—Ç–æ –ø–æ –º–µ–ª–æ—á–∏... –ù–æ —Å–µ–≥–æ–¥–Ω—è —è –∑–¥–µ—Å—å —á—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å –∫–∞–∑–∞–∫–æ–≤ —Å —é–º–æ—Ä–æ–º –∏ –∏—Ä–æ–Ω–∏–µ–π! üé≠",
                    "–ü—Ä–æ—Å—Ç–æ –ø–∞—Ä–µ–Ω—å —Å —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—á–∞–π–Ω–æ –æ–∫–∞–∑–∞–ª—Å—è –≤ —ç—Ç–æ–º —á–∞—Ç–µ! –®—É—á—É, –∫–æ–Ω–µ—á–Ω–æ! –ì–æ—Ç–æ–≤ –ø–æ—Ä–∞—Å—Å—É–∂–¥–∞—Ç—å –æ –∫–∞–∑–∞–∫–∞—Ö –≤ —Å–≤–æ–µ–º –Ω–µ–ø–æ–≤—Ç–æ—Ä–∏–º–æ–º —Å—Ç–∏–ª–µ! üòé"
                ]
            elif any(word in message_lower for word in ['–ø–æ–ª–∏—Ç–∏–∫', '–≤–ª–∞—Å—Ç—å', '–ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ']):
                responses = [
                    "–û–π, –ø–æ–ª–∏—Ç–∏–∫–∞? –î–∞–≤–∞–π—Ç–µ –ª—É—á—à–µ –æ –∫–∞–∑–∞–∫–∞—Ö! –•–æ—Ç—è... –∑–Ω–∞–µ—Ç–µ, –∫–∞–∑–∞—á—å–µ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - —ç—Ç–æ –≤–∞–º –Ω–µ —à—É—Ç–∫–∏! –≠—Ç–æ –∂ –ø–æ—á—Ç–∏ –∫–∞–∫ –º–µ—Å—Ç–Ω–æ–µ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ç–æ–ª—å–∫–æ —Å –Ω–∞–≥–∞–π–∫–∞–º–∏! üòÑ",
                    "–ü–æ–ª–∏—Ç–∏–∫–∞? –ù–µ—Ç, —Å–µ–≥–æ–¥–Ω—è —Ç–æ–ª—å–∫–æ —é–º–æ—Ä –∏ –∫–∞–∑–∞–∫–∏! –•–æ—Ç—è, –µ—Å–ª–∏ —Å–µ—Ä—å–µ–∑–Ω–æ, —É –∫–∞–∑–∞–∫–æ–≤ –±—ã–ª–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è... –Ω–æ —ç—Ç–æ —É–∂–µ —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–∞—è –∏—Å—Ç–æ—Ä–∏—è! üìö"
                ]
            else:
                # –û–±—â–∏–µ —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –æ –∫–∞–∑–∞–∫–∞—Ö
                responses = [
                    "–ö–∞–∑–∞–∫–∏! –í–µ–ª–∏–∫–∏–π –Ω–∞—Ä–æ–¥! –ó–Ω–∞–µ—Ç–µ, –æ–Ω–∏ –º–Ω–µ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç... –Ω—É, –≤ –æ–±—â–µ–º, –ª—é–¥–µ–π —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º! –®—É—á—É! –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –≤–æ—Å—Ö–∏—â–∞—é—Å—å –∏—Ö –∏—Å—Ç–æ—Ä–∏–µ–π –∏ —Ç—Ä–∞–¥–∏—Ü–∏—è–º–∏! üêé",
                    "–û, –∫–∞–∑–∞–∫–∏! –ì–æ—Ç–æ–≤ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –≤–∞–º –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ... –Ω–æ –≤ –º–æ–µ–º —Ñ–∏—Ä–º–µ–Ω–Ω–æ–º —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º —Å—Ç–∏–ª–µ! –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞–ª–∏ –ª–∏ –≤—ã, —á—Ç–æ –∫–∞–∑–∞–∫–∏ - –ø–µ—Ä–≤—ã–µ –±–æ—Ä—Ü—ã —Å –±—é—Ä–æ–∫—Ä–∞—Ç–∏–µ–π? –ü—Ä–∞–≤–¥–∞, –º–µ—Ç–æ–¥—ã –±—ã–ª–∏ —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–µ! ‚öîÔ∏è",
                    "–ö–∞–∑–∞–∫–∏ - —ç—Ç–æ –≤–∞–º –Ω–µ —à—É—Ç–∫–∏! –•–æ—Ç—è —è –≤—Å–µ–≥–¥–∞ –Ω–∞–π–¥—É –ø–æ–≤–æ–¥ –ø–æ—à—É—Ç–∏—Ç—å! –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é, –∫–∞–∫ –±—ã –æ–Ω–∏ –≤–µ–ª–∏ –±–ª–æ–≥ –≤ Telegram... –ù–∞–≤–µ—Ä–Ω–æ–µ, —Å —é–º–æ—Ä–æ–º –∏ –æ—Å—Ç—Ä–æ—Ç–∞–º–∏! üì±",
                    "–ó–Ω–∞–µ—Ç–µ, –≥–ª—è–¥—è –Ω–∞ –∫–∞–∑–∞–∫–æ–≤, —è –ø–æ–Ω–∏–º–∞—é - —á—Ç–æ–±—ã –±—ã—Ç—å —É—Å–ª—ã—à–∞–Ω–Ω—ã–º, –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –Ω–µ —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞, –Ω–æ –∏... —ç—ç—ç... —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å! –®—É—á—É, –∫–æ–Ω–µ—á–Ω–æ! –ú–∏—Ä–Ω—ã–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ! ‚úåÔ∏è",
                    "–ö–∞–∑–∞–∫–∏! –ù–∞—Å—Ç–æ—è—â–∏–µ –º–∞—Å—Ç–µ—Ä–∞ –∏—Ä–æ–Ω–∏–∏ –∂–∏–∑–Ω–∏! –•–æ—Ç—è, –µ—Å–ª–∏ —Å–µ—Ä—å–µ–∑–Ω–æ, –∏—Ö –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ª–Ω–∞ —É—Ä–æ–∫–æ–≤ –æ —Å–≤–æ–±–æ–¥–µ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏... –ù–æ –¥–∞–≤–∞–π—Ç–µ —Å —é–º–æ—Ä–æ–º - –æ–Ω–∏ —Ç–æ—á–Ω–æ —É–º–µ–ª–∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã! üòÑ",
                    "–ö–æ–≥–¥–∞ —Å–ª—ã—à—É –æ –∫–∞–∑–∞–∫–∞—Ö, –≤—Å–µ–≥–¥–∞ –≤—Å–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ —é–º–æ—Ä - –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –æ–±—Å—É–¥–∏—Ç—å —Å–µ—Ä—å–µ–∑–Ω—ã–µ —Ç–µ–º—ã! –¢–∞–∫ —á—Ç–æ –¥–∞–≤–∞–π—Ç–µ —Å–º–µ—è—Ç—å—Å—è –∏ —É–∑–Ω–∞–≤–∞—Ç—å –Ω–æ–≤–æ–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ! üé™",
                    "–ö–∞–∑–∞–∫–∏... –ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å, —É –Ω–∏—Ö –±—ã–ª–æ –æ—Ç–ª–∏—á–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞! –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –∏—Ö –º–µ–º—ã... '–ö–∞–∑–∞–∫ –≤ Telegram: –æ—Ç–ø—Ä–∞–≤–ª—è—é –Ω–∞—Ä—è–¥ –≤ –æ—Ç—Å—Ç–∞–≤–∫—É!' –®—É—á—É, —à—É—á—É! üìú",
                    "–û –∫–∞–∑–∞–∫–∞—Ö –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –¥–æ–ª–≥–æ... –Ω–æ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –æ—Å—Ç—Ä–æ—É–º–Ω—ã–º! –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è, –ª—É—á—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—à—É—Ç–∏—Ç—å, —á–µ–º —Å—Ç–æ —Ä–∞–∑ –Ω–∞—Å—É–ø–∏—Ç—å—Å—è! üòä",
                    "–ö–∞–∑–∞—á—å—è —Ç–µ–º–∞! –û—Ç–ª–∏—á–Ω—ã–π –ø–æ–≤–æ–¥ –¥–ª—è –º–æ–µ–≥–æ —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ —é–º–æ—Ä–∞! –ó–Ω–∞–µ—Ç–µ, –æ–Ω–∏ –±—ã –æ—Ü–µ–Ω–∏–ª–∏ –∏—Ä–æ–Ω–∏—é... –µ—Å–ª–∏ –±—ã, –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ –±—ã–ª–∏ —Ç–∞–∫ —Å–µ—Ä—å–µ–∑–Ω—ã! –ù–æ –º—ã-—Ç–æ —Å –≤–∞–º–∏ –ø–æ–Ω–∏–º–∞–µ–º! üéØ",
                    "–ì–æ–≤–æ—Ä—è –æ –∫–∞–∑–∞–∫–∞—Ö, –Ω–µ–ª—å–∑—è –Ω–µ –æ—Ç–º–µ—Ç–∏—Ç—å –∏—Ö –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ—Å—Ç—å... –ø–æ—á—Ç–∏ –∫–∞–∫ —É –º–µ–Ω—è –≤ –±–ª–æ–≥–µ! –¢–æ–ª—å–∫–æ —É –Ω–∏—Ö - —à–∞—à–∫–∏, —É –º–µ–Ω—è - —Å–ª–æ–≤–∞. –ò —Ç–æ –∏ –¥—Ä—É–≥–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å—Ç—Ä—ã–º! ‚úçÔ∏è"
                ]
            
            response = random.choice(responses)
            logger.info(f"‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –æ—Ç–≤–µ—Ç: {response}")
            return response
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: {e}")
            return self.get_fallback_response()
    
    def get_fallback_response(self):
        """–ó–∞–ø–∞—Å–Ω–æ–π —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç"""
        fallback_responses = [
            "–ö–∞–∑–∞–∫–∏! –û—Ç–ª–∏—á–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –º–æ–µ–≥–æ —é–º–æ—Ä–∞! –ó–Ω–∞–µ—Ç–µ, –æ–Ω–∏ –º–Ω–µ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç... –≤–ø—Ä–æ—á–µ–º, –ª—É—á—à–µ –ø–æ—à—É—á—É –≤ –¥—Ä—É–≥–æ–π —Ä–∞–∑! üòÑ",
            "–û –∫–∞–∑–∞–∫–∞—Ö? –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º! –ù–æ —Å–Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —É–ª—ã–±–Ω–µ–º—Å—è - –∂–∏–∑–Ω—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∞, —á—Ç–æ–±—ã –±—ã—Ç—å —Å–µ—Ä—å–µ–∑–Ω—ã–º! üé≠",
            "–ì–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å –∫–∞–∑–∞–∫–æ–≤ —Å –ø—Ä–∏—Å—É—â–∏–º –º–Ω–µ —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞! –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è, —Å–º–µ—Ö –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å... –∏ –¥–∏—Å–∫—É—Å—Å–∏–∏! üòä"
        ]
        return random.choice(fallback_responses)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AI
ai = NavalnyAI()

def contains_kazak(text):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–æ–≤–æ '–∫–∞–∑–∞–∫'"""
    if not text or not isinstance(text, str):
        return False
    pattern = r'\b[–ö–∫]–∞–∑–∞[–∫—á]\w*\b'
    return bool(re.search(pattern, text, re.IGNORECASE))

def send_message(chat_id, text):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    try:
        url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
        data = {"chat_id": chat_id, "text": text}
        response = requests.post(url, json=data, timeout=10)
        if response.status_code == 200:
            logger.info(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {text}")
        else:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {response.status_code}")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {e}")

@app.route('/webhook', methods=['POST'])
def webhook():
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ–±—Ö—É–∫–∞"""
    try:
        update = request.get_json()
        
        if 'message' not in update or 'text' not in update['message']:
            return jsonify({'status': 'ok'})
        
        message = update['message']
        chat_id = message['chat']['id']
        user_message = message['text']
        
        # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤
        if 'from' in message and message['from'].get('is_bot', False):
            return jsonify({'status': 'ok'})
        
        # –†–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ "–∫–∞–∑–∞–∫"
        if contains_kazak(user_message):
            logger.info(f"üéØ –ù–∞–π–¥–µ–Ω–æ —Å–ª–æ–≤–æ '–∫–∞–∑–∞–∫': {user_message}")
            
            # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
            response = ai.get_response(user_message)
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
            send_message(chat_id, response)
        
        return jsonify({'status': 'ok'})
            
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤–µ–±—Ö—É–∫–∞: {e}")
        return jsonify({'status': 'error'}), 500

@app.route('/')
def home():
    return "üé≠ –Æ–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –±–æ—Ç –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!"

def set_webhook():
    """–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞"""
    try:
        render_url = os.environ.get('RENDER_EXTERNAL_URL')
        if render_url:
            webhook_url = f"{render_url}/webhook"
            url = f"https://api.telegram.org/bot{BOT_TOKEN}/setWebhook"
            response = requests.post(url, json={"url": webhook_url})
            if response.status_code == 200:
                logger.info(f"‚úÖ –í–µ–±—Ö—É–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: {webhook_url}")
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–µ–±—Ö—É–∫–∞: {e}")

if __name__ == '__main__':
    set_webhook()
    port = int(os.environ.get('PORT', 10000))
    logger.info("üé≠ –Æ–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –±–æ—Ç –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—â–µ–Ω!")
    app.run(host='0.0.0.0', port=port)
